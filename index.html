<html>
    <head>
        <title>asd</title>
        <meta charset="utf-8">
        <style>
            .button{
                width: 50%;
                background: gray;
                text-align: center;
            }
        </style>
        <script type="text/javascript" src="jquery.js"></script>

        <script>
            var state = {
                "left": 0,
                "right": 0,
            }
            var move_event = 'mousemove';
            var up_event = 'mouseup';
            var down_event = 'mousedown';
            $(function (){
                if ("ontouchstart" in window) {
                    move_event = 'touchmove';
                    up_event = 'touchend';
                    down_event = 'touchstart';
                }
            })
            function trigger(key, val){
                state[key] = val

                $.each(state, function(k,v){
                    $.get( "/"+ k +"/" + v + "/", function() {
                        console.info("ready")
                    });
                })
            }
            window.onload = function() {
                $(".js_button").on(down_event, function(){
                    trigger($(this).data("key"), 1)
                })
                $(".js_button").on(up_event, function(){
                    trigger($(this).data("key"), 0)
                })
            }
        </script>
    </head>
    <body>
        <div class="js_button button" data-key="left">Left</div>
        <div class="js_button button" data-key="right">Right</div>
    </body>
</html>
